:root{
  --bg-page:#000; --bg-container:#07080a; --card:#0c1114; --muted:#8b9499; --text:#d9e1e8;
  --accent:#4e8cff; --border:rgba(255,255,255,0.06); --focus:rgba(78,140,255,0.10);
  --ghost-shadow:rgba(0,0,0,0.6);
}
/* reset & layout */
*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:var(--text);-webkit-font-smoothing:antialiased}
html,body{min-height:100%;background:var(--bg-page)}
body{display:flex;align-items:flex-start;justify-content:center;padding:12px}
.container{width:100%;max-width:1200px;border-radius:8px;background:var(--bg-container);border:1px solid var(--border);overflow:visible}
header{padding:12px 16px;border-bottom:1px solid rgba(255,255,255,0.03)}
h1{font-size:1.2rem;color:var(--text);font-weight:700}
.app-description{color:var(--muted);font-size:0.85rem;margin-top:2px}

/* main */
.main-content{display:flex;gap:14px;padding:14px;flex-wrap:wrap}
.input-section{flex:1;min-width:280px;padding:14px;background:linear-gradient(180deg,var(--card),rgba(255,255,255,0.012));border-radius:6px;border:1px solid var(--border)}
.schedule-section{flex:2;min-width:300px}
.form-group{margin-bottom:10px}
label{display:block;margin-bottom:6px;font-weight:600;color:var(--muted);font-size:0.9rem}
input[type="time"],input[type="text"],input[type="number"],input[type="range"],button,input[type="date"]{width:100%;padding:8px 10px;border-radius:5px;border:1px solid rgba(255,255,255,0.03);background:rgba(255,255,255,0.01);color:var(--text);font-size:0.95rem}
input::placeholder{color:rgba(217,225,230,0.45)}
input:focus,select:focus{box-shadow:0 4px 12px var(--focus);border-color:var(--accent);outline:none}
button{background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);color:var(--text);font-weight:700;cursor:pointer;display:inline-flex;gap:6px;align-items:center;justify-content:center;font-size:0.9rem}
.small-btn{background:transparent;border:1px solid var(--border);padding:6px 8px;border-radius:5px;font-size:0.85rem}
.task-controls{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
.keyboard-hint{font-size:0.85rem;color:var(--muted);margin-top:6px;text-align:center}

/* schedule table */
.schedule{margin-top:10px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);background:transparent;overflow:visible}
.schedule-header,.schedule-item{display:grid;grid-template-columns:40px 110px 1fr 110px 140px;gap:6px;border-bottom:1px solid rgba(255,255,255,0.02)}
.schedule-header div{padding:8px;text-align:center;font-size:0.9rem;color:var(--muted);font-weight:800;border-bottom:1px solid rgba(255,255,255,0.02)}
.schedule-item{padding:0;background:linear-gradient(180deg,rgba(255,255,255,0.005),rgba(0,0,0,0.012))}
.schedule-item:last-child{border-bottom:none}
.time-block,.duration-block{padding:10px;background:rgba(255,255,255,0.012);text-align:center;font-weight:700;display:flex;flex-direction:column;justify-content:center;font-size:0.9rem}
.task-block{padding:10px;display:flex;justify-content:space-between;align-items:center;gap:6px}
.task-name{font-weight:700;margin-bottom:4px;color:var(--text);padding:4px;border-radius:4px;background:transparent;min-width:100px;cursor:text;touch-action:manipulation;-webkit-user-select:text;user-select:text;font-size:0.95rem}
.task-name:focus,.editable-duration:focus{outline:none;box-shadow:0 4px 12px var(--focus);border:1px dashed rgba(255,255,255,0.03)}
.editable-duration{padding:4px;border-radius:4px;cursor:text;min-width:24px;text-align:center;display:inline-block;touch-action:manipulation;-webkit-user-select:text;user-select:text;font-weight:700;font-size:0.9rem}
.drag-handle{cursor:grab;padding:6px;color:var(--muted);font-size:0.95rem;text-align:center;user-select:none;border-radius:4px;touch-action:none}
.drag-handle:active{cursor:grabbing;transform:scale(.995);background:rgba(255,255,255,0.01)}
.placeholder{border:1px dashed rgba(255,255,255,0.05);background:rgba(255,255,255,0.01);margin:6px 8px;border-radius:4px}
.drag-ghost{position:fixed;pointer-events:none;z-index:9999;opacity:.96;border-radius:5px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.04));box-shadow:0 10px 25px var(--ghost-shadow);transform-origin:center;transition:transform .08s}
.gap-time{background:rgba(255,255,255,0.01);text-align:center;padding:8px;font-size:0.9rem;color:var(--muted);font-weight:700;grid-column:1 / -1;border-top:1px solid rgba(255,255,255,0.02);border-bottom:1px solid rgba(255,255,255,0.02)}
.actions-block{display:flex;justify-content:center;gap:6px;align-items:center;padding:6px}
.action-btn{touch-action:manipulation;pointer-events:auto;padding:6px;font-size:0.9rem}

/* active highlight */
.schedule-item.active{background:linear-gradient(90deg,rgba(78,140,255,0.06),rgba(78,140,255,0.02));border:2px solid var(--accent);border-radius:5px;position:relative;box-shadow:0 6px 20px rgba(78,140,255,0.06)}
.gap-time.active{background:linear-gradient(90deg,rgba(110,80,200,0.06),rgba(110,80,200,0.02));border:2px solid rgba(110,80,200,0.9);border-radius:5px;position:relative;box-shadow:0 6px 20px rgba(110,80,200,0.05)}

/* Modal styles */
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:2000}
.modal{background:var(--card);border-radius:8px;padding:16px;max-width:92%;width:420px;border:1px solid var(--border);box-shadow:0 10px 30px rgba(0,0,0,0.6)}
.modal h3{margin-bottom:8px}
.modal .modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
.modal .modal-input{width:100%;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);background:rgba(255,255,255,0.01);color:var(--text)}

/* Mobile layout */
@media(max-width:968px){
  body{padding:10px}
  .container{border-radius:6px}
  .main-content{flex-direction:column;gap:12px;padding:12px}

  /* Mobile-optimized layout */
  .schedule-header{display:none}
  .schedule-item{display:flex;flex-direction:column;padding:10px;gap:8px;border-bottom:1px solid rgba(255,255,255,0.05);margin-bottom:6px;border-radius:5px;background:rgba(255,255,255,0.01)}

  /* Task header with name and action buttons */
  .task-header{display:flex;justify-content:space-between;align-items:flex-start;width:100%;gap:8px}
  .task-name{font-size:1rem;margin:0;padding:4px;min-width:0;flex:1;line-height:1.3;border:none;background:transparent}

  /* Action buttons on the right - horizontal layout */
  .mobile-actions{display:flex;gap:4px;align-items:center}
  .mobile-move-controls{display:flex;gap:4px}
  .mobile-move-controls button{font-size:12px;padding:7px 8px}
  .actions-block{justify-content:flex-end;padding:0;gap:4px}
  .actions-block button{padding:7px 8px;font-size:12px}

  /* Task details - time and duration below */
  .task-details{display:flex;justify-content:space-between;align-items:center;width:100%;font-size:0.85rem;color:var(--muted);margin-top:4px}
  .time-display{display:flex;align-items:center;gap:6px}
  .duration-block{display:flex;align-items:center;gap:4px;padding:0;background:transparent}
  .duration-block span{font-weight:600;padding:4px 6px;background:rgba(255,255,255,0.03);border-radius:4px;min-width:30px;display:inline-block;text-align:center;font-size:0.9rem}

  /* Hide desktop elements */
  .schedule-item .time-block,
  .schedule-item .drag-handle,
  .schedule-item .task-block{display:none}

  /* Adjust input section for mobile */
  .input-section{padding:12px}
  .form-group{margin-bottom:8px}
  .task-controls{flex-direction:column;gap:6px}
  .task-controls button{width:100%;padding:8px;font-size:0.9rem}

  /* Adjust date picker section */
  .schedule-section > div:first-child{flex-wrap:wrap;gap:6px}
  #date-picker{width:100%;order:3;margin-top:6px;padding:8px;font-size:0.9rem}

  /* Make gap indicator more compact */
  .gap-time{padding:6px;font-size:0.85rem;margin:4px 0}

  /* Fix for duration editing */
  .editable-duration{min-width:30px;padding:4px 6px;font-size:0.9rem;background:rgba(255,255,255,0.03);border-radius:4px;border:1px solid transparent}
  .editable-duration:focus{background:rgba(255,255,255,0.05);border:1px dashed var(--accent)}

  /* Fixed note styling */
  .fixed-note{font-size:0.8rem;color:var(--muted);margin-top:4px}
}

/* Desktop only */
@media(min-width:969px){
  .mobile-time{display:none}
  .mobile-actions{display:none}
}
